name: Ci
on:
    push:
        branch: ["**"]

env:
    PIP_DISABLE_PIP_VERSION_CHECK: "1"
    PYTHONUNBUFFERED: "1"

jobs:
    lint-type-test:
        runs-on: ubuntu-latest
        steps:
        - name: Checkout
          uses: actions/checkout@v4

        - name: Setup python
          uses: actions/setup-python@v5
          with:
            python-version: ${matrix.python-version}
            cache: 'pip'

        - name: Install dependencies
          run: |
            python -m pip install --upgrade pip
            pip install -e .[dev]
        
        - name: Lint and Type check
          run: |
            ruff check .
            mypy app
        
        - name: Unit testing
          run: |
            pytest
        
        - name: Build docker image
          run: |
            docker build -t equal-experts-api-interview:ci .
            


